<!DOCTYPE html>
<html>
<head>
    <title>File Player</title>
</head>
<body>
    <ul id="file-list"></ul>
    <script>
        function playFile(filename) {
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/play');
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send('filename=' + encodeURIComponent(filename));
        }

        function addFileToList(filename) {
            var li = document.createElement("li");
            var button = document.createElement("button");
            button.innerHTML = "Play " + filename;
            button.onclick = function() {
                playFile(filename);
            };
            li.appendChild(button);
            document.getElementById("file-list").appendChild(li);
        }

        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (xhr.readyState === XMLHttpRequest.DONE) {
                if (xhr.status === 200) {
                    var fileNames = JSON.parse(xhr.responseText);
                    for (var i = 0; i < fileNames.length; i++) {
                        addFileToList(fileNames[i]);
                    }
                } else {
                    console.log("Failed to get file list");
                }
            }
        };
        xhr.open('GET', '/files');
        xhr.send();
    </script>
</body>
</html>
